import"./style-CWPg30Uh.js";import"./EntryFile-BS4wfFeh.js";/* empty css               */const s="POST",i="",n={method:s,body:i};let d=()=>{let t=document.getElementById("FormId");var e=new FormData(t);return e.append("image",u()),n.body=e,n};const u=()=>{var t=document.createElement("canvas"),e=document.getElementById("photo");t.height=e.naturalHeight,t.width=e.naturalWidth;var a=t.getContext("2d");a.drawImage(e,0,0,t.width,t.height);var r=t.toDataURL();return r},h="bin",m={PostUrl:h};let g=async()=>{let t=m.PostUrl,e=jVarGlobalTableName,a=d(),r=`/${t}/${e}/UploadImageAsData`;return await await fetch(r,a)},f=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),a=!0;return e.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),a=!1;return}}),a};const F="Show.html",v="CreateCamera.html",o={RedirectToUrl:F,PresentUrl:v};let L=()=>{S()===!1&&b()};const S=()=>window.location.pathname.endsWith(`/${o.PresentUrl}`)?(window.location.href=`${o.RedirectToUrl}`,!0):!1,b=()=>{let t=`${jVarGlobalTableName}${o.RedirectToUrl}`;window.location.href=t};let $=async()=>{f()&&(await g()).status===200&&L()},w=()=>{let t=document.getElementById("SaveButtonId");t!==null&&t.addEventListener("click",$)},j=()=>{const t={audio:!1,video:{width:700,height:500}};navigator.mediaDevices.getUserMedia(t).then(e=>{const a=document.querySelector("video");a.srcObject=e,a.play()}).catch(e=>{console.error(`${e.name}: ${e.message}`)})},I=()=>{let t=document.getElementById("CameraId");t!==null&&t.addEventListener("click",j)},y=t=>{console.log("this : ",t),U(),t.preventDefault()};function U(){const t=document.getElementById("canvas"),e=t.getContext("2d"),a=320,r=300,l=document.getElementById("photo");{t.width=a,t.height=r,e.drawImage(video,0,0,a,r);const c=t.toDataURL("image/png");l.setAttribute("src",c)}}let V=()=>{let t=document.getElementById("startbutton");t!==null&&t.addEventListener("click",y)},p=t=>{const e=t.currentTarget,a=320;let r=0,l=!1;l||(r=e.videoHeight/(e.videoWidth/a),isNaN(r)&&(r=a/(4/3)),e.setAttribute("width",a),e.setAttribute("height",r),canvas.setAttribute("width",a),canvas.setAttribute("height",r),l=!0)},E=()=>{let t=document.getElementById("video");t!==null&&t.addEventListener("canplay",p,!1)},T=()=>{w(),I(),V(),E()};const B=()=>{T()},R=()=>{B()};R();
