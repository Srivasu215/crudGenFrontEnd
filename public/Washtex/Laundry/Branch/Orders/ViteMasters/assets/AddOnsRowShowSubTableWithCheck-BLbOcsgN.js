import"./style-CWPg30Uh.js";import"./EntryFile-BS4wfFeh.js";const n="bin",c={GetUrl:n},s=async()=>{let a=i({inGetKey:"inRowPk"});return a===null?(alert("need inRowPk in URL "),await!1):await await(await fetch(`/${c.GetUrl}/${jVarGlobalTableName}/${a}`)).json()};let i=({inGetKey:a})=>{const e=window.location.search;return new URLSearchParams(e).get(a)};const d=async()=>await s(),u=async()=>{let a=await d();return a===!1?await!1:(m({inDataAsObject:a}),b(),a)},m=({inDataAsObject:a})=>{document.getElementById("FormId").querySelectorAll("input").forEach(r=>{r.name in a&&(r.value=a[r.name])})},b=()=>{document.getElementById("BsSubTableRefreshId").click()},j={"data-toolbar":"#ToolBarFixed","data-search":"true","data-searchable":"true","data-show-footer":"true","data-id-field":"pk"},L={tableAttributes:j},h=()=>{var a=$("#table");a.attr(L.tableAttributes)},F=async()=>{let a=jVarGlobalSubTableTagId;var e=$(`#${a}`);e.bootstrapTable({data:[]})},f=()=>{h(),F().then()},S="POST",V={Accept:"application/json","Content-Type":"application/json"},y="",o={method:S,headers:V,body:y};let w=()=>{let a=document.getElementById("FormId");return o.body=JSON.stringify(I(a)),o};function I(a){var e=new FormData(a),t={};for(var[r,l]of e)t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(l)):t[r]=l;return t}const T="bin",g={PostUrl:T};let R=async()=>{let a=g.PostUrl,e=jVarGlobalTableName,t=w(),r=`/${a}/${e}`;return await await(await fetch(r,t)).json()},p=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),t=!0;return e.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),t=!1;return}}),t};const U="ShowSimple.html",P={RedirectToUrl:U};let v=()=>{window.location.href=`${jVarGlobalTableName}${P.RedirectToUrl}`},B=async()=>{if(p()){let e=await R();e!==null&&e&&v()}},D=()=>{let a=document.getElementById("SaveButtonId");a!==null&&a.addEventListener("click",B)};const E="bin",k={PostUrl:E};let G=async()=>{let a=k.PostUrl,e=jVarGlobalSubTableName,t=N({inGetKey:"inRowPk"}),r=`/${a}/${e}/FilterData/RefPK/${t}`;return await await fetch(r)},N=({inGetKey:a})=>{const e=window.location.search;return new URLSearchParams(e).get(a)},A=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),t=!0;return e.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),t=!1;return}}),t},q=({InData:a})=>{let e=jVarGlobalSubTableTagId;console.log("InData:",a);var t=$(`#${e}`);t.bootstrapTable("load",a)},J=async()=>{if(A()){let e=await G();if(e.status===200){let t=await e.json();t&&q({InData:t})}}},C=()=>{let a=document.getElementById("BsSubTableRefreshId");a!==null&&a.addEventListener("click",J)},H=()=>{D(),C()};const K=async()=>{u().then(),f(),H(),z()},z=()=>{document.getElementById("HeaderToDataListId").click()},O=()=>{K()};O();
